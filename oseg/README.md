# OSEG - OpenAPI SDK Example Generator

Create (almost) ready to use SDK snippets for SDKs generated using [openapi-generator](https://openapi-generator.tech/) using example data from your OpenAPI spec.

## Where does the example data come from?

Example data used to generate the code snippets can come from a number of places:

* example or examples values in schema
* default values in schema
* Externally referenced JSON files defined in schema
* You can also create a JSON file with examples for all the endpoints you want

OSEG currently generates one code snippet file per `requestBody` definition, but only a single example per `parameters` definition.

In other words, you can generate multiple examples of the same operation/endpoint by having multiple `requestBody` definitions. Each generate example will have different data embedded within it. However, since `parameters` is tied to a single operation, the same data will apply to any and all `requestBody` definitions.

If you use a custom JSON file with examples you can define as many examples per endpoint as you want, since you can define each data source separately (`query`, `path`, `header`, `cookie`, and `body`) per endpoint.

## How to run

The entrypoint to this project is `run.py`. It currently supports two commands:

### config-help

Prints all config options available to a given generator.

Run `python3 run.py config-help --help` for more details.

Show config options for the `python` generator:

```bash
python3 run.py config-help -g python
```

## Tests

See [tests directory](tests).

## Feature support

The aim of this project is to cover the most common use-cases in an OpenAPI spec. 

### Supported 

* Requests with and without formdata: `openapi-generator` will create a different interface if an endpoint's `content-type` has formdata (`multipart/form-data` or `application/x-www-form-urlencoded`) and everything else
* Discriminators with `allOf`

### Issues

The following are issues with the SDK code generated by `openapi-generator`.

* `allOf` without a discriminator: Depending on the `openapi-generator` generator used, the generated SDK may be completely broken
  * `typescript-node` SDK code is generated broken by `openapi-generator` 
  * Other SDKs currently supported by OSEG will usually just use a generic `object` type
* `anyOf`
  * `typescript-node` generated SDK does not set data
  * `php` generated SDK does not set data
  * Other SDKs currently supported by OSEG generate a class
* `oneOf`
  * `typescript-node` generated SDK does not set data
  * `php` generated SDK does not set data
  * Other SDKs currently supported by OSEG generate a class
* Multiple values in `type` definition. New in OpenAPI 3.1 `type` can now be an array of supported types
  * `c#`, `java`, `ruby` Generate a class
  * `python` generates a class but does not use it, types property as the first value in `type`
  * `php` generates a class, data not set
  * `typescript-node` generates a class, data not set
* `openapi-generator` generates a class for inline schema with `type=object`. If two or more Operations share identical inline schema definitions, `openapi-generator` will only generate a class for one of the Operations, and all Operations will reference this class. The name of the class depends on which Operation is read first by `openapi-generator`, but it may not reflect the first definition within the OAS file and thus is impossible for OSEG to know the name of the class ahead of time.
